<?xml version="1.1" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog" 
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext" 
                   xmlns:pro="http://www.liquibase.org/xml/ns/pro" 
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext 
                    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd 
                    http://www.liquibase.org/xml/ns/pro 
                    http://www.liquibase.org/xml/ns/pro/liquibase-pro-4.8.xsd 
                    http://www.liquibase.org/xml/ns/dbchangelog 
                    http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.8.xsd">    
    <changeSet author="pauloborges (nanual)" id="20230502-01">
        <createTable tableName="seqnumber">
            <column name="tablename" type="VARCHAR(100)">
                <constraints nullable="false" primaryKey="true"/>
            </column>
            <column defaultValueNumeric="0" name="seqnum" type="INT">
                <constraints nullable="false"/>
            </column>
        </createTable>
    </changeSet>
    
    <!-- Sebastian - Agregar columna initial_amount para manejar fondo inicial de caja -->
    <changeSet author="sebastian (unicenta-pos)" id="20241004-01">
        <addColumn tableName="closedcash">
            <column name="initial_amount" type="DOUBLE" defaultValueNumeric="0.0">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    
    <!-- Sebastian - Agregar columna accumulates_points para controlar acumulación de puntos por producto -->
    <changeSet author="sebastian (unicenta-pos)" id="20241026-01">
        <addColumn tableName="products">
            <column name="accumulates_points" type="BOOLEAN" defaultValueBoolean="true">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    
    <!-- Sebastian - Agregar campos de pregunta y respuesta de seguridad para recuperación de contraseña -->
    <changeSet author="sebastian (unicenta-pos)" id="20241127-01">
        <addColumn tableName="people">
            <column name="security_question" type="VARCHAR(500)">
                <constraints nullable="true"/>
            </column>
            <column name="security_answer" type="VARCHAR(255)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
    
    <!-- Sebastian - Actualizar template Printer.Ticket: eliminar logo y traducir todo al español -->
    <changeSet author="sebastian (unicenta-pos)" id="20241210-01">
        <comment>Actualizar template Printer.Ticket: eliminar logo y traducir completamente al español</comment>
        <delete tableName="resources">
            <where>name = 'Printer.Ticket'</where>
        </delete>
        <insert tableName="resources">
            <column name="id" value="48"/>
            <column name="name" value="Printer.Ticket"/>
            <column name="restype" value="0"/>
            <column name="content" valueBlobFile="../com/openbravo/pos/templates/Printer.Ticket.xml"/>
        </insert>
    </changeSet>
</databaseChangeLog>